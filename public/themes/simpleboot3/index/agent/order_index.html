<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">    <meta name="apple-mobile-web-app-capable" content="yes"/>    <title>用户信息</title>    <link rel="stylesheet" href="__TMPL__/public/assets/css/public.css">    <link rel="stylesheet" href="__TMPL__/public/assets/css/weui.min.css">    <style type="text/css">        #header {            width: 100%;            height: 100%;            overflow: hidden;        }        #content {            width: 90%;            height: auto;            overflow: hidden;        }        html，body {            overfow-x: hidden;        }        .user {            line-height: 2.5rem;            font-size: 18px;            font-weight: bold;        }        .user input {            color: red;        }        .sex select {            width: 100%;            height: 100%;            margin: 0 auto;            position: absolute;            border: none;            top: 0;            left: 55%;            overflow: hidden;            color: red;            font-size: 18px;            line-height: 2.5rem;        }        select {            height: 2rem;            margin-bottom: 5%;            border: none;            /*background:white;*/            background: #ffffff;            appearance: none;            -moz-appearance: none;            -webkit-appearance: none;            border: none;        }        select option {            height: 2rem;            margin-bottom: 5%;            border: none;            background: white;        }        .a-upload input {            opacity: 0;            filter: alpha(opacity=0);            cursor: pointer        }        #idnobtn {            background: #FFFFFF url(__TMPL__/public/assets/images/uploadbg.jpg) no-repeat center;            background-size: 30px;        }    </style></head><body><div class="header" id="header">    <img src="__TMPL__/public/assets/images/bg.png" alt=""></div><div class="contents" id="content" style="">    <form id="form1" onsubmit="return false" action="##" method="post">        <input type="hidden" name="comp_id" value="{$comp_id}">        <input type="hidden" name="num" value="{$num}">        <div class="titles">账户信息</div>        <div class="user name"><input type="text" placeholder="请输入昵称" id="name" name="name"></div>        <div class="user psd"><input type="password" placeholder="请输入密码" id="user_pass" name="user_pass"></div>        <div class="user psd"><input type="password" placeholder="请输入密码" id="password" name="password"></div>        <div class="titles" style="margin-top: 2rem">基本信息</div>        <div class="user name"><input type="text" placeholder="请输入真实姓名" id="trueName" name="trueName"></div>        <div class="user name">            <div class="ipt_bank" style="width: 200px;height: 2.5rem;overflow: hidden;-webkit-appearance: none;">                <select style="width: 100%;height: 2.5rem;margin-left:30%" id="sex" name="sex">                    <option value="0">性别</option>                    <option value="1">男</option>                    <option value="2">女</option>                </select>            </div>        </div>        <div class="user mobile"><input type="tel" placeholder="请输入手机号" id="mobile" name="mobile" value="{$mobile}"                                        readonly></div>        <div class="user idnumber"><input type="text" placeholder="请输入身份证号" id="idno" name="idno"></div>        <input type="hidden" name="idnopic" id="idnopic">        <div class="weui_cell">            <div class="weui_cell_bd weui_cell_primary">                <div class="weui_uploader">                    <div class="weui_uploader_hd weui_cell">                        <div class="weui_cell_bd weui_cell_primary">请上传身份证正反面照片</div>                        <div class="weui_cell_ft js_counter">0/2</div>                    </div>                    <div class="weui_uploader_bd">                        <ul class="weui_uploader_files">                            <!-- 预览图插入到这 --> </ul>                        <div class="weui_uploader_input_wrp">                            <input class="weui_uploader_input js_file" type="file" multiple accept="image/jpg,image/jpeg,image/png" id="idnoimg"></div>                    </div>                </div>            </div>        </div>        <div class="titles" style="margin-top: 2rem">个人账户</div>        <div class="user alipay"><input type="text" placeholder="请输入支付宝账号" id="aliCard" name="aliCard"></div>        <div class="user name"><input type="text" placeholder="请输入支付宝真实姓名" id="aliName" name="aliName"></div>        <div class="user bankcard"><input type="text" placeholder="请输入银行卡号" id="bankCard" name="bankCard"></div>        <div class="user bank"><input type="text" placeholder="请选择开户银行" id="bank" name="bank"></div>        <div class="user add">            <div class="ipt_add" style="width: 200px;height: 2.5rem;overflow: hidden">                <select style="width: 100%;height: 2.5rem;margin-top: -2.5rem;margin-left:30%;-webkit-appearance: none;"                        name="province" id="province">                    <option value="">请选择省</option>                    <foreach name="$province" item="vo">                        <option value="{$vo.provinceID}">{$vo.province}</option>                    </foreach>                </select>            </div>        </div>        <div class="user add">            <div class="ipt_add" style="width: 200px;height: 2.5rem;overflow: hidden">                <select style="width: 100%;height: 2.5rem;margin-top: -2.5rem;margin-left:30%;-webkit-appearance: none;"                        name="city" id="city">                    <option>请选择市</option>                </select>            </div>        </div>        <div class="user add">            <div class="ipt_add" style="width: 200px;height: 2.5rem;overflow: hidden">                <select style="width: 100%;height: 2.5rem;margin-top: -2.5rem;margin-left:30%;-webkit-appearance: none;"                        name="area" id="area">                    <option>请选择区</option>                </select>            </div>        </div>        <div class="user banks"><input type="text" placeholder="请输入开户支行" id="bankBranch" name="bankBranch"></div>        <div class="titles" style="margin-top: 2rem">安全信息</div>        <div class="user anquanshuo">            <div class="ipt_anquanshuo" style="width: 200px;height: 2.5rem;overflow: hidden;-webkit-appearance: none;">                <select style="width: 100%;height: 2.5rem;margin-top: -2.5rem;margin-left:30%" id="security"                        name="security">                    <option value="0">请选择密保问题</option>                    <option>您母亲的姓名是？</option>                    <option>您父亲的姓名是？</option>                    <option>您配偶的姓名是？</option>                    <option>您的出生地是？</option>                    <option>您高中班主任的名字是？</option>                    <option>您初中班主任的名字是？</option>                    <option>您小学班主任的名字是？</option>                    <option>您的小学校名是？</option>                    <option>您的学号（或工号）是？</option>                    <option>您父亲的生日是？</option>                    <option>您母亲的生日是？</option>                    <optionx>您配偶的生日是？</optionx>                </select>            </div>        </div>        <div class="user anquan"><input type="text" placeholder="输入密保答案" id="answer" name="answer"></div>        <div id="xieyi" style="margin-top: 2rem">            <input type="checkbox" name="ty" id="ty">            <label id="xy-off">同意 <span style="color: blue">《用户协议》</span></label>        </div>        <div id="button" class="btn_query" id="register">立即注册</div>    </form></div><!--协议--><div id="xieyi_content">    <div class="text_content content">        <p><h4 style="text-align: center"> 游艺汇用户协议</h4></p>        <div style="padding-left: 10px;padding-right: 5px;line-height: 30px;">            <div>                &nbsp&nbsp&nbsp欢迎您使用游艺汇平台服务。在您注册成为游艺汇用户之前，请务必认真阅读和充分理解《游艺汇用户协议》（以下简称“本协议”）中各条款内容，特别是免除或者限制责任的条款、法律适用及争议解决条款以及粗体或其他特别标识的条款，因为这些条款可能会明确您应履行的义务或对您的权利有一定限制。除非您接受本协议所有条款，否则您无权注册、登录或使用本协议所涉及的相关服务。若您注册、登录、使用或以任何方式使用本协议所涉及的相关服务的行为将视为对本协议的全部接受，即表示您同意接受本协议各项条款的约束。如果您不同意本协议中的条款，请勿注册、登录或使用本协议相关服务。            </div>            <div>如果您未满18周岁，请在监护人的陪同下阅读本协议，并特别注意未成年人使用条款。</div>            <div style="padding-left: 20px;">一、【服务内容】</div>            <div>                1.1河南睿之能网络科技有限公司为游艺汇这一网络平台、客户端（含APP\APK\SDK\API方式）的所有者及经营者，完全按照其发布的服务条款和操作规则提供基于互联网以及移动互联网的相关服务（以下简称“网络服务”）。游艺汇服务的具体内容为向用户发布游戏推广资源并提供下载链接。            </div>            <div>1.2                您一旦注册成功成为用户，将得到一个账号和密码，您需要对自己在账户中的所有活动和事件负全责。如果由于您的过错导致您的账号和密码脱离您的控制，则由此导致的针对您、游艺汇或任何第三方造成的损害，您将承担全部责任。            </div>            <div>1.3 用户应输入账号和密码登录游艺汇账户。</div>            <div>1.4                用户理解并接受，游艺汇仅提供相关的网络服务，除此之外与相关网络服务有关的设备（如个人电脑、手机、及其他与接入互联网或移动互联网有关的装置）及所需的费用（如为接入互联网而支付的电话费及上网费、为使用移动网而支付的手机费）均由用户自行负担。            </div>            <div style="padding-left: 20px;">二、【用户使用规则】</div>            <div>2.1                用户在申请使用游艺汇网络服务时，必须向游艺汇提供真实、准确、完整有效的个人资料，如个人资料提供不准确、不真实、不合法、不详尽或有任何变动的，必须及时更新或修改。因用户提供个人资料不准确、不真实、不合法、不详尽而引发的一切后果由用户承担，并且游艺汇保留停止用户使用游艺汇相关网络服务的权利。            </div>            <div>2.2                用户不应将其账号、密码转让、出借或以任何脱离用户控制的形式交由他人使用。如用户发现其账号遭他人非法使用，应立即通知游艺汇。因非法入侵行为或用户的保管疏忽导致账号、密码遭他人非法使用，游艺汇不承担任何责任。            </div>            <div>2.3 用户应当为自身注册账户下的一切行为负责，因用户行为而导致的用户自身或其他任何第三方的任何损失或损害，游艺汇不承担责任。</div>            <div>2.4 用户在使用游艺汇网络服务过程中，必须遵循以下原则：</div>            <div>2.4.1 遵守中国有关的法律和法规；</div>            <div>2.4.2 遵守所有与网络服务有关的网络协议、规定和程序；</div>            <div>2.4.3 不得为任何非法目的而使用游艺汇网络平台；</div>            <div>2.4.4 不得使用任何第三方软件；</div>            <div>2.4.5 不得利用游艺汇这一网络平台进行任何可能对互联网或移动网正常运转造成不利影响的行为；</div>            <div>2.4.6 不得利用游艺汇提供的网络服务上传、展示或传播任何虚假的、骚扰性的、中伤他人的、辱骂性的、恐吓性的、庸俗淫秽的或其他任何非法的信息资料；</div>            <div>2.4.7 不得侵犯游艺汇和其他任何第三方的专利权、著作权、商标权、名誉权或其他任何合法权益；</div>            <div>2.4.8 不得利用游艺汇网络平台进行任何不利于游艺汇网络平台的行为；</div>            <div>2.4.9 不得传输或发表：煽动抗拒、破坏宪法和法律、行政法规实施的言论，煽动颠覆国家政权，推翻社会主义制度的言论，煽动分裂国家、破坏国家统一的言论，煽动民族仇恨、民族歧视、破坏民族团结的言论；</div>            <div>2.4.10 不得干扰、阻碍游艺汇正常地提供产品和服务，尤其不得：</div>            <div>（1）攻击、侵入游艺汇的平台服务器或使平台服务器过载；</div>            <div>（2）破解、修改游艺汇提供的客户端程序；</div>            <div>（3）攻击、侵入游艺汇提供的游戏服务器或游戏服务器端程序或使游戏服务器过载；</div>            <div>（4）不合理地干扰或阻碍他人使用游艺汇所提供的游戏和服务；</div>            <div>（5）利用程序的漏洞和错误（Bug）破坏游戏的正常进行或传播该漏洞或错误（Bug）；</div>            <div>（6）直接或间接利用游戏Bug（包括系统、程序、设定等方面存在的漏洞或不合理的现象）、程序漏洞获利或扰乱游戏秩序，或者利用Bug、漏洞达到个人目的；</div>            <div>                （7）制作、使用、发布、传播任何形式的妨碍游艺汇所提供游戏公平性的辅助工具或程序（指用于在游戏中获取优势，但不属于游戏平台或各游戏软件的一部分的任何文件或程序），包括作弊性质的外挂以及相关辅助性质的外挂等（包括但不限于游戏多开、虚拟IP、加速性质或超出游戏设定范围等操作）；            </div>            <div>（8）不得修改客户端程序，使之改变或者新增或者减少游艺汇平台所预先设定的功能，或者导致客户端向服务器发送的数据出现异常的一切行为。</div>            <div>2.4.11 如发现任何非法使用用户账号或账号出现安全漏洞的情况，应立即通告游艺汇。</div>            <div>2.5                如用户在使用网络服务时违反任何上述规定，游艺汇或其授权的人员有权要求用户改正或直接采取一切必要的措施（包括但不限于更改或删除用户收藏的内容等、暂停或终止用户使用网络服务的权利）以减轻用户不当行为造成的影响。如果用户使用网络服务违反了任何上述规定，导致任何第三方遭受损害的，您应当独立承担责任，游艺汇因此遭受损失的，您也应当一并赔偿。            </div>            <div style="padding-left: 20px;">三、【服务变更、中断或终止】</div>            <div>3.1 鉴于网络服务的特殊性，用户同意游艺汇有权根据业务发展情况随时变更、中断或终止部分或全部的网络服务而无需通知用户，也无需对任何用户或任何第三方承担任何责任；</div>            <div>3.2                用户理解，游艺汇需要定期或不定期地对提供网络服务的平台（如互联网网站、移动网络等）或相关的设备进行检修或者维护，如因此类情况而造成网络服务在合理时间内的中断，游艺汇无需为此承担任何责任，但游艺汇应尽可能事先进行通告。            </div>            <div>3.3 如发生下列任何一种情形，游艺汇有权随时中断或终止向用户提供本协议项下的网络服务（包括收费网络服务）而无需对用户或任何第三方承担任何责任：</div>            <div>3.3.1 用户提供的个人资料不真实；</div>            <div>3.3.2 用户违反相关法律法规或本协议中规定的使用规则；</div>            <div>3.3.3 按照法律规定或主管部门的要求；</div>            <div>3.3.4 出于安全的原因或其他必要的情形。</div>            <div style="padding-left: 20px;">四、【知识产权】</div>            <div>4.1游艺汇提供的网络服务中包含的任何文本、图片、图形、音频和/或视频资料均受版权、商标和/或其它相关法律的保护，未经相关权利人同意，上述资料均不得用于任何商业目的。</div>            <div>4.2                游艺汇为提供网络服务而使用的任何软件（包括但不限于软件中所含的任何图像、照片、动画、录像、录音、音乐、文字和附加程序、随附的帮助材料）的一切权利均属于该软件的著作权人，未经该软件的著作权人许可，用户不得对该软件进行反向工程、反向编译或反汇编。            </div>            <div style="padding-left: 20px;">五、【隐私保护】</div>            <div>5.1 用户理解并同意，游艺汇能获取用户下列信息：</div>            <div>5.1.1 用户注册时填写的全部个人信息；</div>            <div>5.1.2 用户在享受游艺汇服务过程中游艺汇可能获得的信息，包括但不限于：</div>            <div>(1) 用户上传到游艺汇这一网络平台的信息；</div>            <div>(2) 用户在访问或使用游艺汇过程中，游艺汇平台自动接收记录的浏览器和计算机信息（包括但不限于IP地址、访问时间、软硬件设备信息、浏览记录等信息）；</div>            <div>(3) 用户使用游艺汇平台过程中的操作痕迹及交易信息等。</div>            <div>5.2 保护用户隐私是游艺汇的一项基本政策，游艺汇保证不对外公开或向第三方提供单个用户的注册资料及用户在使用网络服务时存储在游艺汇的非公开内容，但下列情况除外</div>            <div>5.2.1 事先获得用户的明确授权；</div>            <div>5.2.2 根据有关的法律法规要求；</div>            <div>5.2.3 按照相关政府主管部门的要求；</div>            <div>5.2.4 为维护社会公众的利益；</div>            <div>5.2.5 为维护游艺汇的合法权益；</div>            <div>5.2.6 为处理某用户与其他用户或权利人之间的纠纷或争议（包括因某用户因知识产权等原因被投诉，向投诉人披露相关信息，以便处理和解决纠纷）。</div>            <div>5.3 游艺汇可能会与第三方合作向用户提供相关的网络服务，在此情况下，如该第三方同意承担与游艺汇同等的保护用户隐私的责任，则游艺汇有权将用户的注册资料等提供给该第三方。</div>            <div>5.4 在不透露单个用户隐私资料的前提下，游艺汇有权对整个用户数据库进行分析并对用户数据库进行商业上的利用。</div>            <div>5.5 将个人信息的收集透明化，尽最大的努力保护我们掌握的信息。</div>            <div style="padding-left: 20px;">六、【免责声明】</div>            <div>6.1 游艺汇不担保网络服务一定能满足用户的要求，也不担保网络服务不会中断，对网络服务的及时性、安全性、准确性也都不作担保。</div>            <div>6.2 游艺汇不保证为向用户提供便利而设置的外部链接的真实性、准确性和完整性，同时，对于该等外部链接指向的不由游艺汇实际控制的任何网页上的内容，游艺汇不承担任何责任。</div>            <div>6.3 对于因电信系统或互联网网络故障、计算机故障或病毒、信息损坏或丢失、计算机系统问题或其它任何不可抗力原因而产生损失，游艺汇不承担任何责任，但将尽力减少因此而给用户造成的损失和影响。</div>            <div>6.4 游艺汇不担保平台所包含或以其他方式通过游艺汇提供给用户的全部信息、内容、产品（包括软件）、服务和从游艺汇发出的电子信息、信件没有病毒或其他有害成分。</div>            <div>                6.5您了解游艺汇仅向您提供网络服务，除游艺汇官方发布的信息外，其他信息均系用户自行发布且可能存在风险和瑕疵，请您审慎判断其他用户发布信息的真实性、安全性及可靠性，您因此而遭受的损失或损害，将由您自行承担。            </div>            <div>                6.6用户知悉并同意，游艺汇可能会与第三方合作向用户提供产品（包括但不限于游戏、第三方应用等）并由第三方向用户提供该产品的升级、维护、客服等后续工作，由该第三方对该产品的质量问题或其本身的原因导致的一切纠纷或用户损失承担责任，用户在此同意将向该第三方主张与此有关的一切权利和损失。            </div>            <div style="padding-left: 20px;">七、【法律适用及争议解决】</div>            <div>7.1 本协议的成立、生效、履行、解释及纠纷解决，适用中华人民共和国法律（不包括冲突法）。</div>            <div>7.2 因本协议引起的或与本协议有关的任何争议，各方应友好协商解决；协商不成的，任何一方均可将有关纠纷或争议提交至游艺汇所属辖区人民法院。</div>            <div style="padding-left: 20px;">八、【未成年人使用条款】</div>            <div>8.1                若用户未满18周岁，您应在监护人同意和指导下访问和/或使用游艺汇的网络服务，并且您的监护人允许您使用游艺汇的网络服务且同意本协议的各项条款。如果您是未成年人的监护人，即表示您同意约束未成年人遵守这些条款使用游艺汇的网络服务。            </div>            <div>8.2 未成年应在监护人的指导下合理安排时间使用游艺汇的网络服务，注意避免沉迷于网络，影响正常的学习生活。</div>            <div style="padding-left: 20px;">九、【其他条款】</div>            <div>9.1 本协议内容同时包括游艺汇不时发布的其他相关协议、规则、声明、政策等内容。上述内容一经正式发布，即成为本协议不可分割的组成部分，与本协议具有同等的法律效力。</div>            <div>9.2 如果本协议中的任何条款无论因何种原因完全或部分无效或不具有执行力，或违反任何适用的法律，则该条款被视为删除，但本协议的其余条款仍应有效并且有约束力。</div>            <div>9.3 游艺汇有权根据有关法律、法规的变化以及公司经营状况和经营策略的调整等修改本协议，而无需另行单独通知用户。修改后的协议会在游艺汇平台上公布，用户可随时通过游艺汇平台浏览最新服务协议条款。            </div>            <div style="padding-left: 20px;">十、【本协议解释权归属】</div>            <div>本协议最终解释权归河南睿之能网络科技有限公司所有。</div>        </div>    </div>    <div class="btn_query footer" id="fanhui" style="border-radius: 0;width: 100%;margin: 0">返回</div></div><script type='text/javascript' src="__TMPL__/public/assets/js/jquery-2.1.4.js" charset='utf-8'></script><script type='text/javascript' src="__TMPL__/public/assets/js/jquery-weui.min.js" charset='utf-8'></script><script type="text/javascript">$(function () {    $('#idnobtn').click(function () {        $('#id_photos').click()    });    var header = $(".header");    var content = $("#content");    var text = $("#xieyi_content");    var off = $("#xy-off");    var fanhui = $("#fanhui");    off.click(function () {        content.hide();        header.hide();        text.show();    });    fanhui.click(function () {        content.show();        header.show();        text.hide();    });    //照片异步上传    $('#id_photos').change(function () {        $.ajaxFileUpload({            url: '/index/agent/idnoUpload',            type: 'post',            secureuri: false,            fileElementId: 'id_photos',            dataType: 'json',            success: function (data, status) {                if (2 != data.total) return;　　 //因为此处指允许上传单张图片，所以数量如果不是1，那就是有错误了                var url = data.files[0].path;                $('.id_photos').empty();                //此处效果是：当成功上传后会返回一个json数据，里面有url，取出url赋给img标签，然后追加到.id_photos类里显示出图片                $('.id_photos').append('<img src="' + url + '" value="' + url + '" style="width:80%" >');                //$('.upload-box').remove();            },            error: function (data, status, e) {   //提交失败自动执行的处理函数                console.log(data);            }        })    })    $("#province").change(function () {        //根据用户所选择的省份获取市级单位        var province = $("#province").val();        $.post("{:url('index/user/address')}", {province_id: province}, function (res) {            var areas = res.msg;            var str = '<option value="">市</option>';            $.each(areas, function (index, data) {                str += '<option value="' + data['cityID'] + '">' + data['city'] + '</option>';            });            //移除已有的HTML文本            $('#city').empty();            //添加新的文本            $('#city').append(str)        })    });    $("#city").change(function () {        //根据用户所选择的省份获取市级单位        var city = $("#city").val();        $.post("{:url('index/user/address')}", {city_id: city}, function (res) {            var areas = res.msg;            var str = '<option value="">区</option>';            $.each(areas, function (index, data) {                str += '<option value="' + data['areaID'] + '">' + data['area'] + '</option>';            });            //移除已有的HTML文本            $('#area').empty();            //添加新的文本            $('#area').append(str)        })    });    $("#button").click(function () {        var check = $("input[type='checkbox']").is(':checked');        var name = $("#name").val();        if (name == '') {            alert('请输入昵称');            return false        }        var user_pass = $("#user_pass").val();        if (user_pass == '') {            alert('密码不能为空');            return false        }        var password = $("#password").val();        if (password == '') {            alert('请确认密码');            return false        }        if (user_pass != password) {            alert('两次密码不一致');            return false        }        var trueName = $("#trueName").val();        if (trueName == '') {            alert('请输入真实姓名');            return false        }        var sex = $("#sex").val();        if (sex == 0) {            alert('请选择性别');            return false        }        var mobile = $("#mobile").val();        if (!(/^1[34578]\d{9}$/.test(mobile))) {            alert("手机号码有误，请重填");            return false;        }        var idno = $("#idno").val();        if (idno == '') {            alert('请输入身份证号');            return false        }        if($("#idnoimg").val() == ''){            alert('请上传身份证正反面照片');            return false        }        var aliCard = $("#aliCard").val();        if (aliCard == '') {            alert('请输入支付宝账号');            return false        }        var aliName = $("#aliName").val();        if (aliName == '') {            alert('请输入支付宝姓名');            return false        }        var province = $("#province").val();        var city = $("#city").val();        var area = $("#area").val();        if (province == '' || city == '' || area == '') {            alert('请选择地址');            return false        }        var security = $("#security").val();        if (security == 0) {            alert('请选择密保问题');            return false        }        var answer = $("#answer").val();        if (answer == '') {            alert('请输入密保答案');            return false        }        if (check) {            $.ajax({                type: 'POST',                dataType: 'json',                url: '{:url("orderMake")}',                data: $('#form1').serialize(),                success: function (ret) {                    alert(ret.msg);                    if (ret.status == 1) {                        url = "{:url('trailer')}";                        location.href = url + '?id=' + ret.id;                    }                }            });        } else {            alert('请阅读并同意《用户协议》');        }    })})</script><script>    $(function () {        // 允许上传的图片类型        var allowTypes = ['image/jpg', 'image/jpeg', 'image/png'];        // 1024KB，也就是 1MB        var maxSize = 1024 * 1024 * 4;        // 图片最大宽度        var maxWidth = 4300;        // 最大上传图片数量        var maxCount = 2;        $('#idnoimg').on('change', function (event) {            var files = event.target.files;            if(files.length > maxCount){                alert('最多上传2张');            }            for (var i = 0, len = files.length; i < len; i++) {                var file = files[i];                var reader = new FileReader();                // 如果类型不在允许的类型范围内                if (allowTypes.indexOf(file.type) === -1) {                    alert('该类型不允许上传');                    continue;                }                if (file.size > maxSize) {                    alert( '图片太大，不允许上传');                    continue;                }                if ($('.weui_uploader_file').length >= maxCount) {                    alert( '最多只能上传' + maxCount + '张图片');                    return;                }                reader.readAsDataURL(file);                reader.onload = function (e) {                    // 插入到预览区                    var $preview = $('<li class="weui_uploader_file weui_uploader_status" style="background-image:url(' + e.target.result + ')"><div class="weui_uploader_status_content">0%</div></li>');                    $('.weui_uploader_files').append($preview);                    var num = $('.weui_uploader_file').length;                    $('.js_counter').text(num + '/' + maxCount);                    // 然后假装在上传，可以post base64格式，也可以构造blob对象上传，也可以用微信JSSDK上传                    var progress = 0;                    function uploading() {                        $preview.find('.weui_uploader_status_content').text(++progress + '%');                        if (progress < 100) {                            setTimeout(uploading,0);                        } else {                            // 如果是失败，塞一个失败图标                            //$preview.find('.weui_uploader_status_content').html('<i class="weui_icon_warn"></i>');                            $preview.removeClass('weui_uploader_status').find('.weui_uploader_status_content').remove();                        }                    }                    setTimeout(uploading,0);                    var image = $('<img/>');                    image.attr('src',e.target.result)                    image.load(function(){                        var square = 700,   //定义画布的大小，也就是图片压缩之后的像素                            canvas = document.createElement('canvas'),                            context = canvas.getContext('2d'),                            imageWidth = 0,    //压缩图片的大小                            imageHeight = 0,                            offsetX = 0,                            offsetY = 0,                            data = '';                        canvas.width = square;                        canvas.height = square;                        context.clearRect(0, 0, square, square);                        if (this.width > this.height) {                            imageWidth = Math.round(square * this.width / this.height);                            imageHeight = square;                            offsetX = - Math.round((imageWidth - square) / 2);                        } else {                            imageHeight = Math.round(square * this.height / this.width);                            imageWidth = square;                            offsetY = - Math.round((imageHeight - square) / 2);                        }                        context.drawImage(this, offsetX, offsetY, imageWidth, imageHeight);                        var base64 = canvas.toDataURL('image/jpeg',0.8);                        //压缩完成执行回调                        $.post("/index/agent/idnoUpload", { img: base64},function(res){                            if(res.code == 1){                                var idnopic = $('#idnopic').val();                                if(idnopic){                                    idnopic += ("," + res.data);                                }else{                                    idnopic = res.data;                                }                                $('#idnopic').val(idnopic)                            }                        },'json');                    });                };            }        });    });</script></body></html>