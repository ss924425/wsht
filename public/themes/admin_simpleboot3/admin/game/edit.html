<include file="public@header" />
<link rel="stylesheet" href="__ROOT__/assets/src/css/bootstrap-datepicker.min.css">
<script src="__ROOT__/assets/src/js/bootstrap-datetimepicker.js"></script>
<script src="__ROOT__/assets/src/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
<style>
	.WdateDiv {
		background-color: #FFFFFF;
		border: 1px solid #BBBBBB;
		padding: 2px;
		width: 180px;
	}
</style>

<script type="text/html" id="photos-item-tpl">
	<li id="saved-image{id}">
		<input id="photo-{id}" type="hidden" name="photo_urls[]" value="{filepath}">
		<input class="form-control" id="photo-{id}-name" type="text" name="photo_names[]" value="{name}"
			   style="width: 200px;" title="图片名称">
		<img id="photo-{id}-preview" src="{url}" style="height:36px;width: 36px;"
			 onclick="imagePreviewDialog(this.src);">
		<a href="javascript:uploadOneImage('图片上传','#photo-{id}');">替换</a>
		<a href="javascript:(function(){$('#saved-image{id}').remove();})();">移除</a>
	</li>
</script>
</head>
<body>
	<div class="wrap">
		<ul class="nav nav-tabs">
			<li><a href="{:url('game/index')}">游戏列表</a></li>
			<li><a href="{:url('game/add')}">新增游戏</a></li>
			<li class="active"><a href="{:url('game/edit',['id'=>request()->param('id')])}">编辑游戏</a></li>
		</ul>
		<form method="post" class="form-horizontal js-ajax-form margin-top-20" action="{:url('game/editPost')}">
			<div class="form-group">
				<label class="col-sm-2 control-label"><span class="form-required">*</span>游戏标题</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" name="post[title]" value="{$game.title}">
				</div>
			</div>
			<div class="form-group">
				<label for="input-remark" class="col-sm-2 control-label">游戏图像</label>
				<div class="col-md-6 col-sm-10">
					<input type="hidden" name="post[thumb]" id="thumbnail" value="">
					<a href="javascript:uploadOneImage('图片上传','#thumbnail');">
						<img src="{:cmf_get_image_preview_url($game['thumb'])}" id="thumbnail-preview" width="135" style="cursor: pointer"/>
					</a>
				</div>
			</div>
			<div class="form-group">
				<label for="input-parent_id" class="col-sm-2 control-label"><span class="form-required"></span>游戏分类</label>
				<div class="col-md-6 col-sm-10">
					<select class="form-control" name="post[catid]" id="input-parent_id">
						<foreach name="cat" item="vo">
							<option value="{$vo.id}" <if condition="$game.catid eq $vo.id">selected</if>>{$vo.cat_name}</option>
						</foreach>
					</select>
				</div>
			</div>

			<div class="form-group">
				<label class="col-sm-2 control-label"><span class="form-required"></span>游戏平台</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" name="post[platform]" value="{$game.platform}">
				</div>
			</div>

			<div class="form-group" id="garea">
				<label class="col-sm-2 control-label">游戏区服</label>
				<div class="col-md-6 col-sm-10">
					<input type="text" class="form-control" name="post[garea]" value="{$game.garea}">
				</div>
			</div>

			<div class="form-group">
				<label for="input-remark" class="col-sm-2 control-label">游戏描述</label>
				<div class="col-md-6 col-sm-10">
					<textarea class="form-control" id="input-remark" name="post[remark]">{$game.remark}</textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<input type="hidden" name="post[id]" value="{$game.id}">
					<button type="submit" class="btn btn-primary js-ajax-submit">修改</button>
				</div>
			</div>
		</form>
	</div>
	<script src="__STATIC__/js/admin.js"></script>
	<script>
        $('.form_date').datetimepicker({
            format: 'yyyy-mm-dd',
            language: 'zh-CN',
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            minView: 2,
            forceParse: 0
        });
	</script>
</body>
</html>